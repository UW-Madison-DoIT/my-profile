<!-- display emergency contacts -->
<div ng-if="!contact.edit || contact.edit == false">
  <p>{{ contact.preferredName }}</p>
  <div ng-repeat="phone in contact.phoneNumbers">
    <p ng-if="phone.value && phone.type">
      <span ng-if="$index === 0">Primary phone: </span>
      <span>{{ phone.value }} ({{ phone.type }})</span>
    </p>
  </div>
  <p>{{ contact.emails[0].value }}</p>
  <p ng-if="contact.relationship">Relationship: {{ contact.relationship }}</p>
  <p ng-if="contact.comments">Comments: {{ contact.comments }}</p>
  <div layout="row" ng-hide="contact.readOnly" class="buttons-small">
    <md-button class="md-accent md-raised" ng-click="addEdit()">Add another</md-button>
    <md-button class="md-default" ng-click="contact.edit = true">Edit</md-button>
    <md-button class="md-warn" ng-click="deleteContact($index)">Delete</md-button>
  </div>
</div>
<!-- edit emergency contacts -->
<div ng-if="contact.edit">
  <form name="emergencyForm" novalidate class="emergency-info">
    <br>
    <md-input-container class="md-block no-margin-bottom">
      <label>Name*</label>
      <input ng-model="contact.preferredName" required aria-required="true" name="name">
    </md-input-container>
    <div ng-repeat="phone in contact.phoneNumbers | limitTo:3 track by $index" layout-gt-xs="row">
      <div flex="90">
        <md-input-container class="md-block no-margin-bottom no-margin-top" flex-gt-sm>
          <label ng-if="$index === 0">Primary phone*</label>
          <input ng-if="$index === 0" type="tel" name="phone{{$index}}" ng-required="$index === 0" ng-model="contact.phoneNumbers[$index].value">
          <label ng-if="$index !== 0">Other phone</label>
          <input ng-if="$index !== 0" type="tel" name="phone{{$index}}" ng-model="contact.phoneNumbers[$index].value">
        </md-input-container>
        <md-input-container class="md-block no-margin-top" flex-gt-sm>
          <label ng-if="$index === 0">Type*</label>
          <label ng-if="$index !== 0">Type</label>
          <md-select name="phoneType{{$index}}" ng-required="$index === 0" ng-model="contact.phoneNumbers[$index].type" aria-label="phone type">
            <md-option value="mobile">Mobile</md-option>
            <md-option value="home">Home</md-option>
            <md-option value="work">Work</md-option>
            <md-option value="other">Other</md-option>
          </md-select>
        </md-input-container>
      </div>
      <div flex="10">
        <md-button aria-label="delete phone number" class="md-icon-button" ng-click="contact.phoneNumbers.splice($index, 1)" ng-if="$index !== 0"></md-button>
      </div>
    </div>
    <md-button class="md-default" ng-click="contact.phoneNumbers.push({ 'type' : '', value : ''})" ng-if="contact.phoneNumbers.length < 3"><md-icon>add</md-icon> Add another phone</md-button>
    <md-input-container class="md-block no-margin-bottom">
      <label>Email*</label>
      <input name="email" required ng-model="contact.emails[0].value">
    </md-input-container>
    <md-input-container class="md-block no-margin-top">
      <label>Relationship*</label>
      <md-select ng-model="contact.relationship" name="relationship" required>
        <md-option ng-repeat="item in relationshipOptions" ng-value="item.key" ng-attr-selected="{{isSelection(contact.relationship, item.key)}}">{{ item.value }}</md-option>
      </md-select>
    </md-input-container>
    <br>
    <md-input-container class="md-block">
      <label>Comments</label>
      <textarea ng-model="contact.comments" md-maxlength="50" placeholder="Ex. First language is Spanish"></textarea>
    </md-input-container>
    <p>*Required</p>
    <md-button class="md-accent md-raised" ng-click="save()" ng-disabled="emergencyForm.$invalid">Save</md-button>
    <md-button class="md-default" ng-click='cancel()'>Cancel</md-button>
    </form>
</div>
